import{r as k}from"./axiosInstance-CX8CKqWj.js";import"./Dashboard-ByQM4gP2.js";import{a as A,P as H,T as X,M as Y,b as N,E as G,D as R}from"./EditOutlined-C5Wf1QqG.js";import{B as f}from"./collapseMotion-C6D7fvUa.js";import{I as g,F as z,a as C,c as J}from"./index-C9WzVhir.js";import{S as K}from"./SaveOutlined-DkKNLFjc.js";import{C as Q}from"./index-FrdxyqzK.js";import{d as W,r as x,e as h,f as u,q as Z,a as o,h as i,k as y,u as t,F as P,j as c,x as E,m as ee,v as te,g as r}from"./index-Bm6eP1qF.js";import"./index-BacrsLz9.js";import"./Col-D9nuZRbI.js";import"./index-cTI4g7-j.js";const ae={style:{display:"flex","justify-content":"space-between",padding:"0px 16px 24px"}},oe={key:0},ne={key:0},ie={key:1},ge=W({__name:"ManageProject",setup(le){const L=[{title:"Name",dataIndex:"name",key:"name",sorter:!0},{title:"Description",dataIndex:"description",key:"description",sorter:!0},{title:"Type",dataIndex:"type",key:"type",sorter:!0},{title:"Ngày tạo",dataIndex:"created_at",key:"created_at"},{title:"Action",dataIndex:"id",key:"action"}],j=x(!1);let b=x();_();function _(){j.value=!0,k({url:"/projects",method:"GET",params:{limit:1e3}}).then(a=>{b.value=a.data}).catch(a=>{console.log(a)}).finally(()=>{j.value=!1})}const s=h({name:"",description:"",type:""}),v=x(!1),O=()=>{v.value=!0},S=()=>{D(s),v.value=!1},D=a=>{k({url:"/projects",method:"POST",data:{data:a}}).then(e=>{e.status===200&&(p("bottomLeft","Thêm dự án",e.data),_())}).catch(e=>{console.log(e)})},T=x(b),l=h({}),U=a=>{l[a]=J(T.value.filter(e=>a===e.id)[0])},B=a=>{Object.assign(T.value.filter(e=>a===e.id)[0],l[a]),k({url:"/projects",method:"PUT",data:{data:l[a]}}).then(e=>{e.status===200?(p("bottomLeft","Sửa dự án",e.data),delete l[a]):p("bottomLeft","Sửa dự án",e.data)}).catch(e=>{console.log(e)})},q=a=>{delete l[a]},F=a=>{k({url:"/projects",method:"DELETE",data:{id:a}}).then(e=>{e.status===200&&p("bottomLeft","Xóa dự án",e.data)}).catch(e=>{console.log(e)})},[M,$]=A.useNotification(),p=(a,e,n)=>{M.info({message:e,description:n,placement:a})},w=a=>{F(a)},V=()=>{p("bottomLeft","Xóa dự án","Hủy xóa thành công")};return(a,e)=>(r(),u(P,null,[Z("div",ae,[o(t(f),{type:"primary",icon:y(t(H)),onClick:O},{default:i(()=>e[4]||(e[4]=[c("Tạo mới")])),_:1},8,["icon"])]),o(t(X),{"data-source":t(b),columns:L,loading:j.value,bordered:""},{bodyCell:i(({column:n,text:I,record:d})=>[["name","description","type"].includes(n.dataIndex)?(r(),u("div",oe,[l[d.id]?(r(),ee(t(g),{key:0,value:l[d.id][n.dataIndex],"onUpdate:value":m=>l[d.id][n.dataIndex]=m,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(r(),u(P,{key:1},[c(te(I),1)],64))])):E("",!0),n.key==="action"?(r(),u(P,{key:1},[l[d.id]?(r(),u("div",ne,[o(t(f),{type:"primary",icon:y(t(K)),onClick:m=>B(d.id)},{default:i(()=>e[5]||(e[5]=[c("Save")])),_:2},1032,["icon","onClick"]),o(t(N),{title:"Are you sure cancel edit project?","ok-text":"Yes","cancel-text":"No",onConfirm:m=>q(d.id)},{default:i(()=>[o(t(f),{danger:"",icon:y(t(Q))},{default:i(()=>e[6]||(e[6]=[c("Cancel")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])])):(r(),u("div",ie,[o(t(f),{type:"primary",icon:y(t(G)),onClick:m=>U(d.id)},{default:i(()=>e[7]||(e[7]=[c("Edit")])),_:2},1032,["icon","onClick"])])),o(t(N),{title:"Are you sure delete this project?","ok-text":"Yes","cancel-text":"No",onConfirm:m=>w(I),onCancel:V},{default:i(()=>[o(t(f),{danger:"",icon:y(t(R))},{default:i(()=>e[8]||(e[8]=[c("Remove")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])],64)):E("",!0)]),_:1},8,["data-source","loading"]),o(t(Y),{open:v.value,"onUpdate:open":e[3]||(e[3]=n=>v.value=n),title:"Thêm dự án",onOk:S},{default:i(()=>[o(t(z),{layout:"vertical",model:s,name:"basic","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off"},{default:i(()=>[o(t(C),{label:"Tên",name:"name",rules:[{required:!0,message:"Please input your project 's name!"}]},{default:i(()=>[o(t(g),{value:s.name,"onUpdate:value":e[0]||(e[0]=n=>s.name=n)},null,8,["value"])]),_:1}),o(t(C),{label:"Mô tả",name:"description",rules:[{required:!0,message:"Please input your project 's description!"}]},{default:i(()=>[o(t(g),{value:s.description,"onUpdate:value":e[1]||(e[1]=n=>s.description=n)},null,8,["value"])]),_:1}),o(t(C),{label:"Loại",name:"type",rules:[{required:!0,message:"Please input your project 's type!"}]},{default:i(()=>[o(t(g),{value:s.type,"onUpdate:value":e[2]||(e[2]=n=>s.type=n)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),o(t($))],64))}});export{ge as default};
