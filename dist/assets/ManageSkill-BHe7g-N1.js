import{r as v}from"./axiosInstance-lGFY1Due.js";import"./Dashboard-D9u-ZNO7.js";import{a as A,P as H,T as X,M as Y,b as h,E as G,D as R}from"./EditOutlined-DUfVESq-.js";import{B as f}from"./collapseMotion-CkkXAWax.js";import{I as g,F as z,a as C,c as J}from"./index-DhBKWbBJ.js";import{S as K}from"./SaveOutlined-BeEfasoQ.js";import{C as Q}from"./index-BQCu_YST.js";import{d as W,r as x,e as E,f as u,q as Z,a as o,h as l,k,u as t,F as _,j as p,x as L,m as ee,v as te,g as r}from"./index-8c-CV0hi.js";import"./index-Bw_PVCK8.js";import"./Col-Cq-4JmTF.js";import"./index-CyFfvLgd.js";const ae={style:{display:"flex","justify-content":"space-between",padding:"0px 16px 24px"}},oe={key:0},ne={key:0},le={key:1},ge=W({__name:"ManageSkill",setup(ie){const O=[{title:"Name",dataIndex:"name",key:"name",sorter:!0},{title:"Description",dataIndex:"description",key:"description",sorter:!0},{title:"Type",dataIndex:"type",key:"type",sorter:!0},{title:"Ngày tạo",dataIndex:"created_at",key:"created_at"},{title:"Action",dataIndex:"id",key:"action"}],S=x(!1);let b=x();T();function T(){S.value=!0,v({url:"/skills",method:"GET",params:{limit:1e3}}).then(a=>{b.value=a.data}).catch(a=>{console.log(a)}).finally(()=>{S.value=!1})}const s=E({name:"",description:"",type:""}),y=x(!1),j=()=>{y.value=!0},P=()=>{D(s),y.value=!1},D=a=>{v({url:"/skills",method:"POST",data:{data:a}}).then(e=>{e.status===200&&(m("bottomLeft","Thêm kỹ năng",e.data),T())}).catch(e=>{console.log(e)})},I=x(b),i=E({}),U=a=>{i[a]=J(I.value.filter(e=>a===e.id)[0])},B=a=>{Object.assign(I.value.filter(e=>a===e.id)[0],i[a]),v({url:"/skills",method:"PUT",data:{data:i[a]}}).then(e=>{e.status===200?(m("bottomLeft","Sửa kỹ năng",e.data),delete i[a]):m("bottomLeft","Sửa kỹ năng",e.data)}).catch(e=>{console.log(e)})},q=a=>{delete i[a]},F=a=>{v({url:"/skills",method:"DELETE",data:{id:a}}).then(e=>{e.status===200&&m("bottomLeft","Xóa kỹ năng",e.data)}).catch(e=>{console.log(e)})},[M,$]=A.useNotification(),m=(a,e,n)=>{M.info({message:e,description:n,placement:a})},w=a=>{F(a)},V=()=>{m("bottomLeft","Xóa kỹ năng","Hủy xóa thành công")};return(a,e)=>(r(),u(_,null,[Z("div",ae,[o(t(f),{type:"primary",icon:k(t(H)),onClick:j},{default:l(()=>e[4]||(e[4]=[p("Tạo mới")])),_:1},8,["icon"])]),o(t(X),{"data-source":t(b),columns:O,loading:S.value,bordered:""},{bodyCell:l(({column:n,text:N,record:d})=>[["name","description","type"].includes(n.dataIndex)?(r(),u("div",oe,[i[d.id]?(r(),ee(t(g),{key:0,value:i[d.id][n.dataIndex],"onUpdate:value":c=>i[d.id][n.dataIndex]=c,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(r(),u(_,{key:1},[p(te(N),1)],64))])):L("",!0),n.key==="action"?(r(),u(_,{key:1},[i[d.id]?(r(),u("div",ne,[o(t(f),{type:"primary",icon:k(t(K)),onClick:c=>B(d.id)},{default:l(()=>e[5]||(e[5]=[p("Save")])),_:2},1032,["icon","onClick"]),o(t(h),{title:"Are you sure cancel edit project?","ok-text":"Yes","cancel-text":"No",onConfirm:c=>q(d.id)},{default:l(()=>[o(t(f),{danger:"",icon:k(t(Q))},{default:l(()=>e[6]||(e[6]=[p("Cancel")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])])):(r(),u("div",le,[o(t(f),{type:"primary",icon:k(t(G)),onClick:c=>U(d.id)},{default:l(()=>e[7]||(e[7]=[p("Edit")])),_:2},1032,["icon","onClick"])])),o(t(h),{title:"Are you sure delete this project?","ok-text":"Yes","cancel-text":"No",onConfirm:c=>w(N),onCancel:V},{default:l(()=>[o(t(f),{danger:"",icon:k(t(R))},{default:l(()=>e[8]||(e[8]=[p("Remove")])),_:1},8,["icon"])]),_:2},1032,["onConfirm"])],64)):L("",!0)]),_:1},8,["data-source","loading"]),o(t(Y),{open:y.value,"onUpdate:open":e[3]||(e[3]=n=>y.value=n),title:"Thêm kỹ năng",onOk:P},{default:l(()=>[o(t(z),{layout:"vertical",model:s,name:"basic","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off"},{default:l(()=>[o(t(C),{label:"Tên",name:"name",rules:[{required:!0,message:"Please input your project 's name!"}]},{default:l(()=>[o(t(g),{value:s.name,"onUpdate:value":e[0]||(e[0]=n=>s.name=n)},null,8,["value"])]),_:1}),o(t(C),{label:"Mô tả",name:"description",rules:[{required:!0,message:"Please input your project 's description!"}]},{default:l(()=>[o(t(g),{value:s.description,"onUpdate:value":e[1]||(e[1]=n=>s.description=n)},null,8,["value"])]),_:1}),o(t(C),{label:"Loại",name:"type",rules:[{required:!0,message:"Please input your project 's type!"}]},{default:l(()=>[o(t(g),{value:s.type,"onUpdate:value":e[2]||(e[2]=n=>s.type=n)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),o(t($))],64))}});export{ge as default};
